<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Upload Invoices â€“ PDF Renamer</title>
    <style>
      body {
        /* Ensure the background image covers the full viewport height */
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        height: 100vh;
        background-image: url('/static/invoice_graveyard.png');
        background-size: cover;
        /* Center the background image so it fills the page without leaving white space */
        background-position: center;
        background-repeat: no-repeat;
      }
      h1 {
        margin-bottom: 1rem;
      }
      .card {
        background-color: #ffffff;
        padding: 2rem;
        border-radius: 0.5rem;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        max-width: 600px;
        margin: 6rem auto;
      }
      /* Hide the native file inputs so we can style the drop zones instead */
      input[type="file"] {
        display: none;
      }
      /* Generic form styling */
      form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }
      /* Styling for the drag-and-drop areas */
      .drag-drop-area {
        border: 2px dashed #007bff;
        border-radius: 0.5rem;
        padding: 1rem;
        text-align: center;
        color: #6c757d;
        cursor: pointer;
        margin-bottom: 1rem;
      }
      .drag-drop-area.dragover {
        background-color: #e9ecef;
      }
      h2 {
        margin-top: 1.5rem;
        margin-bottom: 0.5rem;
      }
      .message {
        background-color: #e2f0d9;
        border: 1px solid #badbcc;
        padding: 1rem;
        border-radius: 0.5rem;
        margin-bottom: 1rem;
        color: #0f5132;
      }
      button {
        padding: 0.5rem 1rem;
        background-color: #007bff;
        border: none;
        color: white;
        border-radius: 0.25rem;
        cursor: pointer;
        font-size: 1rem;
      }
      button:hover {
        background-color: #0069d9;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Upload PDF Invoices</h1>
      <div class="message">
        As your PDFs are being renamed, please take a moment to remember how great Justin is!
      </div>
      <!-- Form for renaming by customer number -->
      <h2>Rename by Customer Number</h2>
      <form method="post" action="/upload" enctype="multipart/form-data">
        <div id="drop-area-cust" class="drag-drop-area">Drag &amp; drop PDFs here or click to select files</div>
        <input type="file" id="customer-files" name="files" accept="application/pdf" multiple required>
        <button type="submit">Upload and Rename (Customer)</button>
      </form>
      <!-- Form for renaming by invoice number -->
      <h2>Rename by Invoice Number</h2>
      <form method="post" action="/upload_invoice" enctype="multipart/form-data">
        <div id="drop-area-inv" class="drag-drop-area">Drag &amp; drop PDFs here or click to select files</div>
        <input type="file" id="invoice-files" name="files" accept="application/pdf" multiple required>
        <button type="submit">Upload and Rename (Invoice)</button>
      </form>
    </div>
    <script>
      // Generic helper to wire up a drag-and-drop area to a hidden file input.
      function setupDragDrop(dropAreaId, inputId) {
        const dropArea = document.getElementById(dropAreaId);
        const fileInput = document.getElementById(inputId);
        // When the drop area is clicked, open the file dialog.
        dropArea.addEventListener('click', () => {
          fileInput.click();
        });
        // Highlight the drop area when a file is dragged over it.
        dropArea.addEventListener('dragover', (e) => {
          e.preventDefault();
          dropArea.classList.add('dragover');
        });
        dropArea.addEventListener('dragleave', () => {
          dropArea.classList.remove('dragover');
        });
        // Handle dropped files by assigning them to the hidden file input.
        dropArea.addEventListener('drop', (e) => {
          e.preventDefault();
          dropArea.classList.remove('dragover');
          const files = e.dataTransfer.files;
          // Assign the dropped files to the file input so the form will submit them
          fileInput.files = files;
        });
      }
      // Initialize both drop zones
      setupDragDrop('drop-area-cust', 'customer-files');
      setupDragDrop('drop-area-inv', 'invoice-files');
    </script>
  </body>
</html>
