<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Renamer</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 2rem;
        }

        h1 {
            margin-bottom: 1rem;
        }

        h2 {
            margin-top: 2.5rem;
        }

        .drag-drop-area {
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 1rem;
            cursor: pointer;
            white-space: pre-line;
        }

        .drag-drop-area.dragover {
            background-color: #f0f0f0;
        }

        input[type="file"] {
            display: none;
        }

        button {
            padding: 0.6rem 1.2rem;
            font-size: 1rem;
            cursor: pointer;
        }
    </style>
</head>
<body>

<h1>PDF Renamer</h1>

<!-- ================= CUSTOMER NUMBER ================= -->

<h2>Rename by Customer Number</h2>
<form method="post" action="/upload" enctype="multipart/form-data">
    <div id="drop-area-customer" class="drag-drop-area">
        Drag & drop PDFs here or click to select files
    </div>
    <input
        type="file"
        id="customer-files"
        name="files"
        accept="application/pdf"
        multiple
        required
    >
    <button type="submit">Upload and Rename (Customer)</button>
</form>

<!-- ================= INVOICE NUMBER ================= -->

<h2>Rename by Invoice Number</h2>
<form method="post" action="/upload_invoice" enctype="multipart/form-data">
    <div id="drop-area-invoice" class="drag-drop-area">
        Drag & drop PDFs here or click to select files
    </div>
    <input
        type="file"
        id="invoice-files"
        name="files"
        accept="application/pdf"
        multiple
        required
    >
    <button type="submit">Upload and Rename (Invoice)</button>
</form>

<!-- ================= SALES ORDER ================= -->

<h2>Rename Sales Order</h2>
<form method="post" action="/upload_salesorder" enctype="multipart/form-data">
    <div id="drop-area-salesorder" class="drag-drop-area">
        Drag & drop PDFs here or click to select files
    </div>
    <input
        type="file"
        id="salesorder-files"
        name="files"
        accept="application/pdf"
        multiple
        required
    >
    <button type="submit">Upload and Rename (Sales Order)</button>
</form>

<script>
    function setupDragDrop(dropAreaId, fileInputId) {
        const dropArea = document.getElementById(dropAreaId);
        const fileInput = document.getElementById(fileInputId);
        const defaultText = dropArea.textContent;

        function updatePreview() {
            if (fileInput.files.length > 0) {
                dropArea.textContent = Array.from(fileInput.files)
                    .map(f => "â€¢ " + f.name)
                    .join("\n");
            } else {
                dropArea.textContent = defaultText;
            }
        }

        ["dragenter", "dragover"].forEach(eventName => {
            dropArea.addEventListener(eventName, e => {
                e.preventDefault();
                e.stopPropagation();
                dropArea.classList.add("dragover");
            });
        });

        ["dragleave", "drop"].forEach(eventName => {
            dropArea.addEventListener(eventName, e => {
                e.preventDefault();
                e.stopPropagation();
                dropArea.classList.remove("dragover");
            });
        });

        dropArea.addEventListener("drop", e => {
            fileInput.files = e.dataTransfer.files;
            updatePreview();
        });

        fileInput.addEventListener("change", updatePreview);

        dropArea.addEventListener("click", () => {
            fileInput.click();
        });
    }

    setupDragDrop("drop-area-customer", "customer-files");
    setupDragDrop("drop-area-invoice", "invoice-files");
    setupDragDrop("drop-area-salesorder", "salesorder-files");
</script>

</body>
</html>
